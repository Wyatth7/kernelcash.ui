  <div class="flex flex-col gap-10 overflow-hidden h-full">
    <div class="flex justify-between">
      <div>
        <h3 class="text-2xl">{{selectedSpendingBucket()?.name}}</h3>
        <p class="m-0 p-0 text-gray-400">{{selectedSpendingBucket()?.category}}</p>
      </div>
      <div class="flex gap-4 flex-wrap">
        <div>
          <kc-total-text [total]="selectedSpendingBucket()?.total || 0" text="Planned" severity="info" />
        </div>
        <div>
          <kc-total-text [total]="remainingBudgetAmount() || 0" text="Remaining" [severity]="remainingBudgetAmount() > 0 ? 'success' : 'danger'" />
      </div>
      </div>
    </div>
    <div class="overflow-y-auto">

    @switch (selectedView()) {
      @case(SelectedView.Allocated) {
        <kc-allocated-transactions-view
          (onAddTransactionsClicked)="selectedView.set(SelectedView.Unallocated)"
          [spendingBucketId]="spendingBucketId()"
          (loading)="loading.set($event)"
          (spendingBucketLoaded)="spendingBucketLoaded($event)" />
      }
      @case(SelectedView.Unallocated) {
        <kc-unallocated-transactions-view
          [spendingBucketId]="spendingBucketId()"
          [budgetDateRange]="budgetDateRange()"
          (loading)="loading.set($event)"
          (onCancelClicked)="selectedView.set(SelectedView.Allocated)"
          (remainingValue)="calculateTotalRemaining($event)"
          (itemsAdded)="transactionsCreated($event)"
        />
      }
    }
    </div>
  </div>

