@defer (when !loading()) {
  <kc-data-card-with-item-list
    [itemList]="spendingBucketItemList()"
  />
} @placeholder (minimum 1000ms) {
  <div class="h-full">
    <kc-spinner [fullScreen]="false" label="Loading your budget..." />
  </div>
}

<kc-drawer [(visible)]="showSelectedSpendingBucket">
  <kc-selected-spending-bucket
    (reload)="loadBudget()"
    [budgetDateRange]="budgetDateRange"
    [spendingBucketId]="+(selectedSpendingBucket()?.id ?? 0)"
    [resetContent]="!showSelectedSpendingBucket()" />
</kc-drawer>

<ng-template #pageTemplate>
  @if (budget()) {
    <div class="flex w-full ml-2 gap-2 items-end flex-wrap sm:flex-nowrap">
      <kc-total-text [column]="false" [total]="budget()?.amount || 0" text="Total" severity="info" />
      <kc-total-text [column]="false" [total]="budget()?.remaining || 0" text="Remaining" />
    </div>
  }
</ng-template>
